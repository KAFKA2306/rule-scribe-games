import os
import sys
import asyncio
from typing import List, Dict, Any

# Ensure we can import from the app
sys.path.append(os.getcwd())

try:
    import app.core.supabase as supabase
except ImportError as e:
    print(f"Error importing supabase client: {e}")
    # For script reliability in this environment, we might just define a mock or rely on the environment being correct.
    # Assuming environment is correct as per user context.
    pass

enrichment_data: List[Dict[str, Any]] = [
    {
        "slug": "terraforming-mars",
        "title_en": "Terraforming Mars",
        "title_ja": "テラフォーミング・マーズ",
        "min_players": 1,
        "max_players": 5,
        "play_time": 120,
        "min_age": 12,
        "published_year": 2016,
        "bgg_url": "https://boardgamegeek.com/boardgame/167791/terraforming-mars",
        "rules_summary": """# 🚀 テラフォーミング・マーズ (Terraforming Mars)

## 💎 ゲームの目的
火星を人が住める惑星に改造（テラフォーミング）するため、巨大企業のCEOとなってプロジェクトを推進します。気温・酸素・海洋の3つのパラメータを上昇させ、その貢献度を示す「テラフォーミング指数（TR）」と、獲得した「勝利点」の合計を競います。

## 📦 コンポーネント
- 火星ボード
- 企業カード、プロジェクトカード
- 資源キューブ（金、銅、銀色）
- プレイヤーボード

## 🔄 ゲームの流れ
数世代（ラウンド）にわたってゲームは進行します。
1. **研究開発フェイズ**: カードを引いて、コスト（3メガクレジット）を払って手札にするか、そのまま捨て札にするか選びます。
2. **アクションフェイズ**: プレイヤーは順に1〜2回のアクションを行います。全員がパスするまで続きます。
    - **カードのプレイ**: コストを払って手札のプロジェクトカードを出します。
    - **標準プロジェクト**: お金を払って、都市建設や緑地化、気温上昇などの標準的な事業を行います。
    - **マイルストーン/アワード**: 早い者勝ちの目標達成や、終了時のボーナスを予約します。
    - **変換アクション**: 植物を緑地タイルに、熱を気温上昇になど、資源をパラメータに変換します。
3. **産出フェイズ**: 自分の生産力に応じて、お金や資源を獲得します。

## 🏆 勝利条件
3つのグローバルパラメータ（酸素濃度14%、気温+8℃、海洋9枚）がすべて達成されるとゲーム終了。
最終的なTRに、盤面の配置点（緑地や都市）やカードの勝利点を加算し、最も点が高いプレイヤーの勝利です。

## 🛠 初心者向けヒント
- **生産力が命**: 序盤は勝利点よりも、お金や資源の「生産力」を上げるカードを優先しましょう。
- **褒賞と称号**: マイルストーン（称号）とアワード（褒賞）は大きな得点源です。早めに狙いを定めましょう。"""
    },
    {
        "slug": "azul",
        "title_en": "Azul",
        "title_ja": "アズール",
        "min_players": 2,
        "max_players": 4,
        "play_time": 30,
        "min_age": 8,
        "published_year": 2017,
        "bgg_url": "https://boardgamegeek.com/boardgame/230802/azul",
        "rules_summary": """# 💠 アズール (Azul)

## 💎 ゲームの目的
ポルトガルの宮殿の壁を美しいタイルで装飾するタイル職人になります。工房からタイルを選んで持ち帰り、自分の壁に並べて模様を完成させましょう。

## 📦 コンポーネント
- プレイヤーボード
- 樹脂製タイル（5色）
- 工房展示ボード

## 🔄 ゲームの流れ
1. **タイル獲得**:
    - 工房（丸い皿）の1つ、または「場の中央」から、欲しい色のタイルを全て取ります。
    - 工房から取った場合、残ったタイルは全て「場の中央」に移動します。
    - 中央から最初に取った人は、ペナルティ（-1点）と共にスタートプレイヤーマーカーを受け取ります。
2. **タイル配置（準備）**:
    - 獲得したタイルを、プレイヤーボード左側の「図案ライン（1〜5個の枠）」のいずれか1列に配置します。
    - 1つのラインには1色しか置けません。溢れた分は床（マイナス点）に落ちます。
3. **壁への装飾**:
    - 全員の獲得が終わったら、「完成した（枠が埋まった）ライン」のタイルを1枚、右側の壁に移動させます。
    - 配置した際、隣接するタイルがあると点数が伸びます。
    - 余ったタイルや未完成ラインのタイルはそのまま残ります。

## 🏆 勝利条件
誰かが壁の横一列（5枚）を完成させたらゲーム終了。
配置点数、完成した列・色ボーナスなどの合計点が最も高いプレイヤーの勝利です。

## 🛠 初心者向けヒント
- **マイナス点を避ける**: 「床ライン」のマイナス点は痛いです。特にラウンド終盤、大量の余りタイルを取らされないように計算しましょう。
- **縦のラインも意識**: 横列だけでなく、縦列を揃えるボーナスも大きいです。"""
    },
    {
        "slug": "blokus",
        "title_en": "Blokus",
        "title_ja": "ブロックス",
        "min_players": 2,
        "max_players": 4,
        "play_time": 20,
        "min_age": 7,
        "published_year": 2000,
        "bgg_url": "https://boardgamegeek.com/boardgame/2453/blokus",
        "rules_summary": """# 🟥 ブロックス (Blokus)

## 💎 ゲームの目的
自分の色のピースをボード上にできるだけ多く配置することを目指す陣取りゲームです。ルールはシンプルですが、奥深い戦略が必要です。

## 📦 コンポーネント
- ゲームボード（20×20マス）
- 4色のピース（各21個、様々な形）

## 🔄 ゲームの流れ
1. **最初の配置**: 各プレイヤーは、自分の最初のピースをボードの隅（角）のマス埋めるように置きます。
2. **手番の進行**: 順番に1つずつピースを置いていきます。
    - **ルール1**: すでに置かれている「自分のピースの角（かど）」とつながるように置かなければなりません。
    - **ルール2**: 「自分のピースの辺（へん）」と接してはいけません。
    - ※他人のピースとは辺で接しても構いません。

## 🏆 勝利条件
全員がピースを置けなくなったら終了です。
手元に残ったピースのマス数（1マス＝-1点）を計算し、マイナスが最も少ない（たくさん置けた）プレイヤーの勝利です。全てのピースを置ききるとボーナス点が入ります。

## 🛠 初心者向けヒント
- **中央を目指す**: 序盤はボードの中央に向かって陣地を広げ、場所を確保しましょう。
- **大きなピースから**: 置きにくい大きなピース（5マス分など）は早めに使い、小さなピースは終盤の隙間埋めにとっておきましょう。"""
    },
    {
        "slug": "scythe",
        "title_en": "Scythe",
        "title_ja": "サイズ - 大鎌戦役 -",
        "min_players": 1,
        "max_players": 5,
        "play_time": 115,
        "min_age": 14,
        "published_year": 2016,
        "bgg_url": "https://boardgamegeek.com/boardgame/169786/scythe",
        "rules_summary": """# 🌾 サイズ - 大鎌戦役 - (Scythe)

## 💎 ゲームの目的
1920年代の架空の欧州を舞台に、5つの勢力のリーダーとなり、領土拡大、資源獲得、メック（巨大ロボット）の配備を行い、東欧の覇権を握ります。

## 📦 コンポーネント
- 拡大マップ
- プレイヤーマット、勢力マット
- メックコマ、キャラクターコマ
- 資源トークン（木、鉄、油、食料）

## 🔄 ゲームの流れ
プレイヤーは自分の手番に、プレイヤーマット上の4つの区画から1つを選び、そこに書かれた「上段アクション」と「下段アクション」を実行します。
- **上段アクション**: 移動、軍事力増強、交易（資源購入）、生産など。
- **下段アクション**: 資源を支払って、アップグレード、配備（メック）、建設、徴兵などを行う。
    - 下段アクションを行うと能力が解放され、上段アクションが強化されたりコストが下がったりします（拡大再生産）。

## 🏆 勝利条件
誰かが「星（目標達成トークン）」を6つ置いた瞬間にゲーム終了。
所持金に加え、達成した星、支配領土、資源数に応じたボーナス金を計算し、最も「資産」を持っているプレイヤーの勝利です。
※「民心」が高いほど、終了時のボーナス倍率が高くなります。

## 🛠 初心者向けヒント
- **移動は計画的に**: 初期位置から出るには特定のアクションが必要です。「渡河」能力を持つメックを早めに配備しましょう。
- **下段アクションの連鎖**: 上段で得た資源で、そのまま下段アクションを行えるような効率的な手順を考えましょう。"""
    },
    {
        "slug": "viticulture",
        "title_en": "Viticulture Essential Edition",
        "title_ja": "ワイナリーの四季",
        "min_players": 1,
        "max_players": 6,
        "play_time": 90,
        "min_age": 13,
        "published_year": 2015,
        "bgg_url": "https://boardgamegeek.com/boardgame/183394/viticulture-essential-edition",
        "rules_summary": """# 🍇 ワイナリーの四季 (Viticulture)

## 💎 ゲームの目的
イタリアのトスカーナ地方でワイナリーを経営します。ブドウの樹を植え、収穫し、醸造し、熟成させて出荷し、名声点（勝利点）を集めます。

## 📦 コンポーネント
- ゲームボード（四季のアクションスペース）
- ワイナリーボード
- 労働者コマ、親方コマ
- 設備カード、ブドウ/ワインカード

## 🔄 ゲームの流れ
1年を春・夏・秋・冬の4シーズンに分けて進めます。
1. **春（起床計画）**: プレイ順を決めます。早起きすれば先手を取れますが、遅く起きればボーナスがもらえます。
2. **夏（労働）**: 黄色いマスのアクション（植樹、施設の建設、ツアーなど）に労働者を配置します。
3. **秋（訪問者）**: 訪問者カードを引きます。
4. **冬（労働）**: 青いマスのアクション（収穫、醸造、出荷、新たな労働者の雇用など）に労働者を配置します。
5. **年末**: ブドウとワインが熟成（価値が+1）し、労働者が手元に戻ります。

## 🏆 勝利条件
誰かが**20点**に到達したら、その年の終わりまでプレイして終了。
最も勝利点が高いプレイヤーの勝利です。

## 🛠 初心者向けヒント
- **親方コマ**: 通常の労働者は、すでに埋まっているマスには置けませんが、「親方」だけは制限を無視して配置できます。大事なアクションのために温存しましょう。
- **訪問者カード**: 強力な効果を持つカードが多いです。アクションがうまくいかない時、カードの効果で打開できることもあります。"""
    },
    {
        "slug": "lost-ruins-of-arnak",
        "title_en": "Lost Ruins of Arnak",
        "title_ja": "アルナックの失われし遺跡",
        "min_players": 1,
        "max_players": 4,
        "play_time": 60,
        "min_age": 12,
        "published_year": 2020,
        "bgg_url": "https://boardgamegeek.com/boardgame/312484/lost-ruins-arnak",
        "rules_summary": """# 🐍 アルナックの失われし遺跡 (Lost Ruins of Arnak)

## 💎 ゲームの目的
無人島アルナックを探索する探検隊長となります。遺跡を発見し、守護者を撃退し、アイテムや遺物を集めて、失われた文明の謎を解き明かします。デッキ構築とワーカープレイスメントが融合した冒険ゲームです。

## 📦 コンポーネント
- メインボード（島の地図と研究トラック）
- プレイヤーボード
- 考古学者コマ（ワーカー）
- カード（アイテム、遺物、恐怖）
- 資源トークン（コイン、羅針盤、石板、矢尻、宝石）

## 🔄 ゲームの流れ
全5ラウンドを行います。
1. **ドロー**: 山札から手札を引きます。
2. **アクション**: 順番に1回ずつアクションを行います。
    - **採掘/探索**: 考古学者コマをボード上の場所へ送り、資源を得たり、新たな場所を発見したりします。移動にはコスト（手札の移動アイコン）が必要です。
    - **カードの購入**: コインでアイテムを、羅針盤で遺物を購入し、デッキを強化します。
    - **カードの使用**: 手札の効果を使います。
    - **研究**: 資源を払って研究トラックを進め、ボーナスや勝利点を得ます。
3. **ラウンド終了**: ボード上のコマを回収し、場のカードを補充します。

## 🏆 勝利条件
5ラウンド終了後、最終得点計算を行います。
研究トラックの進捗、発見した遺跡や守護者、購入したカードなどの点を合計し、最も高いプレイヤーの勝利です。

## 🛠 初心者向けヒント
- **研究が大事**: ゲームの得点の大部分は「研究トラック」から来ます。探索だけでなく、しっかり資源を研究に回しましょう。
- **恐怖カード**: 探索するとお邪魔カード「恐怖」がデッキに入ります。これを除外する効果を持つカードやアクションは貴重です。"""
    },
    {
        "slug": "clank",
        "title_en": "Clank!",
        "title_ja": "クランク！",
        "min_players": 2,
        "max_players": 4,
        "play_time": 60,
        "min_age": 13,
        "published_year": 2016,
        "bgg_url": "https://boardgamegeek.com/boardgame/201808/clank-deck-building-adventure",
        "rules_summary": """# 🐉 クランク！ (Clank!)

## 💎 ゲームの目的
ドラゴンの巣食う地下迷宮に忍び込み、お宝を盗んで生還するチキンレース×デッキ構築ゲームです。音（クランク）を立てれば立てるほど、ドラゴンの怒りを買って攻撃を受けるリスクが高まります。

## 📦 コンポーネント
- 両面ゲームボード（ダンジョン）
- カード（デッキ、リザーブ、ダンジョン列）
- クランクキューブ（各色）
- ドラゴン袋

## 🔄 ゲームの流れ
1. **カードの補充**: 手札を5枚になるまで引きます。
2. **カードのプレイ**: 手札を全て使い、移動力・攻撃力・スキルポイントを得ます。
    - **移動**: マップを進みます。
    - **攻撃**: モンスターを倒し、報酬を得ます。
    - **スキル**: 新しいカードを購入し、デッキを強化します。
3. **クランク！**: 特定のカードを使うと「音」を立ててしまいます。自分の色のキューブを「クランクエリア」に置きます。
4. **ドラゴンの攻撃**: カード補充時にドラゴンのマークが出ると、袋からキューブを引きます。自分の色のキューブが出たらダメージ！

## 🏆 勝利条件
アーティファクト（お宝）を1つ以上持って、地上（またはその近く）まで戻ってくること。
HPが尽きずに脱出できたプレイヤーの中で、アーティファクトやデッキの価値、持ち帰ったゴールドの合計点が最も高いプレイヤーの勝利です。
※地下深くで倒れると0点（脱落）になることも！

## 🛠 初心者向けヒント
- **欲張らない**: 地下深くまで行けば高価なお宝がありますが、戻れなくなるリスクも増えます。最初のお宝を取ってさっさと逃げるのも立派な戦術です。
- **移動カード**: 常に移動力を確保しないと、ドラゴンに追いつかれてしまいます。"""
    },
    {
        "slug": "brass-birmingham",
        "title_en": "Brass: Birmingham",
        "title_ja": "ブラス：バーミンガム",
        "min_players": 2,
        "max_players": 4,
        "play_time": 120,
        "min_age": 14,
        "published_year": 2018,
        "bgg_url": "https://boardgamegeek.com/boardgame/224517/brass-birmingham",
        "rules_summary": """# 🏭 ブラス：バーミンガム (Brass: Birmingham)

## 💎 ゲームの目的
産業革命期のイギリス・バーミンガム地方の起業家となり、紡績所、炭鉱、製鉄所などの産業施設を建設し、運河と鉄道のネットワークを広げます。

## 📦 コンポーネント
- ゲームボード
- プレイヤーボード
- 産業タイル
- カード（都市カード、産業カード）
- 資源キューブ（石炭、鉄）、ビール樽

## 🔄 ゲームの流れ
「運河の時代」と「鉄道の時代」の2部構成で進みます。
1. **アクション**: 手番では手札を捨てて2回のアクションを行います。
    - **建設**: 自分のネットワーク内（または特定の都市）にタイルを配置します。石炭や鉄が必要です。
    - **敷設**: 拠点を繋ぐ運河や鉄道を敷きます。
    - **売却**: 紡績所や工場の商品を売却し、収入レベルを上げます。ビールが必要です。
    - **借金**: 勝利点を減らす代わりにお金を得ます。
    - **開発**: 将来のために低いレベルのタイルを除外します。
2. **時代の終了**: 運河の時代が終わると、全ての運河とレベル1の建物が撤去されます。

## 🏆 勝利条件
2つの時代の合計勝利点が最も高いプレイヤーの勝利です。
勝利点は、建設した産業タイルの得点と、リンク（運河・鉄道）の得点の合計で決まります。

## 🛠 初心者向けヒント
- **ビールが鍵**: 商品を売るにも鉄道を敷くにも「ビール」が必須です。醸造所を建てるか、市場から確保するルートを常に意識しましょう。
- **借金は怖くない**: 序盤はお金が足りません。積極的に借金（融資）アクションを行い、拡大再生産の元手にしましょう。"""
    },
    {
        "slug": "century-spice-road",
        "title_en": "Century: Spice Road",
        "title_ja": "センチュリー：スパイスロード",
        "min_players": 2,
        "max_players": 5,
        "play_time": 45,
        "min_age": 8,
        "published_year": 2017,
        "bgg_url": "https://boardgamegeek.com/boardgame/209685/century-spice-road",
        "rules_summary": """# 🌶️ センチュリー：スパイスロード (Century: Spice Road)

## 💎 ゲームの目的
シルクロードのキャラバンとなり、スパイスを集めて交換し、高得点の勝利点カードを獲得します。シンプルながら奥深い、純粋なエンジンビルド（拡大再生産）ゲームです。

## 📦 コンポーネント
- 商人カード
- 勝利点カード
- スパイスキューブ（黄＜赤＜緑＜茶 の順に価値が高い）
- 金属コイン（ボーナス）

## 🔄 ゲームの流れ
手番プレイヤーは以下のアクションを1つだけ行います。
1. **プレイ**: 手札からカードを1枚出し、効果を適用します。
    - **生産**: スパイスを獲得する。
    - **アップグレード**: 手持ちのスパイスをランクアップさせる（例：黄→赤）。
    - **交換**: 特定のスパイスを別のスパイスセットに交換する（例：赤2個→緑2個）。
2. **獲得**: 場の商人カードを1枚手札に加えます。左端以外を取るにはスパイスを払う必要があります。
3. **休息**: 使ったカード（捨て札）を全て手札に戻します。
4. **達成**: 必要なスパイスを支払って、勝利点カードを獲得します。

## 🏆 勝利条件
誰かが勝利点カードを5枚（人数による）獲得したら終了。
カードの得点、残ったスパイス、コインの合計が最も高いプレイヤーの勝利です。

## 🛠 初心者向けヒント
- **好循環を作る**: 「生産→交換→交換→高得点」のサイクルをいかに少ない手数で回せるかが勝負です。無駄なカードは取らないように。
- **休息のタイミング**: 手札が尽きるまで粘るより、必要なカードを使い回すために早めに休息するのも手です。"""
    },
    {
        "slug": "little-town-builders",
        "title_en": "Little Town Builders",
        "title_ja": "リトルタウンビルダーズ",
        "min_players": 2,
        "max_players": 4,
        "play_time": 45,
        "min_age": 10,
        "published_year": 2017,
        "bgg_url": "https://boardgamegeek.com/boardgame/241261/little-town",
        "rules_summary": """# 🏡 リトルタウンビルダーズ (Little Town Builders)

## 💎 ゲームの目的
未開の土地に小さな町を作る建築家たち。ワーカーを配置して資源を集め、建物を建てて勝利点を稼ぎます。自分の建物だけでなく、他人の建物も利用できるのがポイントです。

## 📦 コンポーネント
- ゲームボード
- 建物タイル
- 資源コマ（木、石、麦、魚）
- お金

## 🔄 ゲームの流れ
4ラウンド行います。
1. **ワーカー配置**:
    - 自分のワーカーをボード上の空いているマスに置きます。
    - 置いたマスの「周囲8マス」にある資源（森、山、湖など）や、建物タイルの効果が発動します。
    - 他人の建物を利用する場合は、持ち主に1金を支払う必要があります。
2. **建物建設**:
    - ワーカー配置時に資源を支払えば、新たな建物タイルを好きな場所に建設できます。以後、そこはアクションスポットになります。
3. **家計の支払い**:各ラウンド終了時、ワーカーたちに食料（麦や魚）を食べさせる必要があります。足りないと減点！

## 🏆 勝利条件
4ラウンド終了後、建物の点数、目標カードの達成点などを合計し、最も高いプレイヤーの勝利です。

## 🛠 初心者向けヒント
- **場所取り**: 周囲の地形と、既存の建物のコンボを狙える場所に建てるのがコツです。
- **食料確保**: 毎ラウンドの食料支払いは忘れがちですが重要です。安定して食料が得られる仕組みを早めに作りましょう。"""
    },
    {
        "slug": "gizmos",
        "title_en": "Gizmos",
        "title_ja": "ギズモ",
        "min_players": 2,
        "max_players": 4,
        "play_time": 45,
        "min_age": 14,
        "published_year": 2018,
        "bgg_url": "https://boardgamegeek.com/boardgame/246191/gizmos",
        "rules_summary": """# ⚙️ ギズモ (Gizmos)

## 💎 ゲームの目的
天才発明家となり、エネルギー球（ビー玉）を使って様々な発明品「ギズモ」を作ります。作ったギズモが連鎖反応（コンボ）を起こし、手番が一気に加速する爽快なエンジンビルドゲームです。

## 📦 コンポーネント
- エネルギー排出機（ビー玉タワー）
- エネルギー球（4色）
- ギズモカード（アクション効果）
- プレイヤーボード
- 勝利点トークン

## 🔄 ゲームの流れ
手番プレイヤーは以下のアクションを1つ行います。
1. **収集**: 排出機の見える場所にあるビー玉を1つ取ります。
2. **獲得**: 場のカードを1枚取り、建設予定地（予約）に置きます。
3. **建設**: 必要な色のビー玉を支払って、手札または場にあるカードを自分の「稼働領域」に設置します。
4. **研究**: 山札からカードを引き、その中から建設または確保を行います。

**連鎖の楽しみ**:
ギズモを設置すると、特定のアクションをした時に「追加アクション」が発生するようになります。
（例：「青い玉を取る」→「建設した青いギズモが反応」→「山札から1枚引く」→……）
後半になると、1つのアクションが何重もの効果を生み出します。

## 🏆 勝利条件
誰かが規定枚数（16枚など）のギズモを建設するか、レベル3のギズモを4枚建設したらゲーム終了。
カードの点数と勝利点トークンの合計が最も高いプレイヤーの勝利です。

## 🛠 初心者向けヒント
- **変換ギズモ**: ビー玉の色を変えられるギズモは事故防止に役立ちます。早めに1つあると便利です。
- **レベル2以上を目指す**: レベル1のカードばかりでは点数が伸びません。中盤からは高レベルのカードを狙いましょう。"""
    },
    {
        "slug": "marrakech",
        "title_en": "Marrakech",
        "title_ja": "マラケシュ",
        "min_players": 2,
        "max_players": 4,
        "play_time": 30,
        "min_age": 6,
        "published_year": 2007,
        "bgg_url": "https://boardgamegeek.com/boardgame/25464/marrakech",
        "rules_summary": """# 👳‍♀️ マラケシュ (Marrakech)

## 💎 ゲームの目的
モロッコの絨毯商人となり、市場に自分の絨毯を敷き詰めます。市場の監督官「アッサン」を動かし、相手に自分の絨毯を踏ませて支払いさせましょう。見た目も美しい陣取りゲームです。

## 📦 コンポーネント
- ゲームボード
- 絨毯（布製、4色）
- アッサン（木製コマ）
- ディルハム（お金）
- 特製サイコロ（スリッパの目）

## 🔄 ゲームの流れ
1. **アッサンの方向転換**: アッサンが向いている方向から、左右90度まで向きを変えられます（後ろには戻れません）。
2. **サイコロを振る**: サイコロの目（1〜4）だけアッサンを前進させます。
3. **支払い**: 止まったマスに他人の絨毯が敷いてあった場合、その「繋がっている絨毯の枚数」分のお金を持ち主に支払います！
4. **絨毯を敷く**: アッサンの隣接するマスに、自分の絨毯を1枚敷きます。
    - 何もないマスか、自分の絨毯の上、または「相手の絨毯を半分だけ隠す」ように敷けます。
    - ※相手の絨毯1枚を完全に覆い隠すことはできません。

## 🏆 勝利条件
全員が絨毯を使い切ったら終了。
「残ったお金」＋「ボード上で見えている自分の絨毯の枚数」の合計点が高いプレイヤーの勝利です。

## 🛠 初心者向けヒント
- **囲い込み**: 自分の絨毯を連結させて巨大なエリアを作ると、相手が踏んだ時のダメージが跳ね上がります。
- **防御**: 踏まれたくない場所の周りを自分で埋めてしまうのも手です。"""
    },
    {
        "slug": "calico",
        "title_en": "Calico",
        "title_ja": "キャリコ",
        "min_players": 1,
        "max_players": 4,
        "play_time": 45,
        "min_age": 10,
        "published_year": 2020,
        "bgg_url": "https://boardgamegeek.com/boardgame/283155/calico",
        "rules_summary": """# 🐈 キャリコ (Calico)

## 💎 ゲームの目的
至高のキルト職人となり、猫たちがくつろぐ最高のクッションを作りましょう。色と柄を組み合わせてボードを埋める、可愛らしい見た目とは裏腹に悩ましいパズルゲームです。

## 📦 コンポーネント
- プレイヤーボード（キルト）
- パッチタイル（6色×6柄）
- 猫トークン、ボタントークン
- 目標タイル

## 🔄 ゲームの流れ
1. **手札から配置**: 手持ちのタイル2枚から1枚を選び、ボードの空いている場所に置きます。
2. **得点判定**:
    - **猫**: 指定された特定の柄を繋げて配置すると、猫がやって来て点数になります。
    - **ボタン**: 同じ色のタイルを3枚繋げると、ボタン（点数）を獲得できます。
    - **目標**: ボードにある3つの目標タイルの周りに、指定された条件（例：全て違う色、2ペアなど）でタイルを置くと高得点になります。
3. **補充**: 場の3枚から1枚を選んで手札に加え、場を補充します。

## 🏆 勝利条件
ボードが全て埋まったら終了。
「猫」「ボタン」「目標タイル」の合計点数が最も高いプレイヤーの勝利です。

## 🛠 初心者向けヒント
- **二兎を追うものは**: 「猫（柄）」と「ボタン（色）」と「目標」を全て満たすのは至難の業です。どれか一つを確実に達成する方が点数が伸びることも多いです。
- **端っこ注意**: ボードの端は置ける枚数が限られるので、早めに計画しておきましょう。"""
    },
    {
        "slug": "taverns-of-tiefenthal",
        "title_en": "The Taverns of Tiefenthal",
        "title_ja": "ティーフェンタールの酒場",
        "min_players": 2,
        "max_players": 4,
        "play_time": 60,
        "min_age": 12,
        "published_year": 2019,
        "bgg_url": "https://boardgamegeek.com/boardgame/269207/taverns-tiefenthal",
        "rules_summary": """# 🍺 ティーフェンタールの酒場 (The Taverns of Tiefenthal)

## 💎 ゲームの目的
酒場の主人となり、店を繁盛させます。美味しいビールを仕入れ、設備をアップグレードし、富豪や貴族を常連客にしましょう。デッキ構築とダイスプレイスメントを組み合わせたゲームです。

## 📦 コンポーネント
- 酒場ボード（パズルピースのように組み合わせる）
- プレイヤーデッキ（客、従業員、設備）
- 白ダイス、カラーダイス
- ビールキューブ、お金トークン

## 🔄 ゲームの流れ
全8ラウンドを行います。
1. **開店**: デッキからカードを引き、酒場のテーブルが埋まるまで客を招き入れます。
2. **ダイスドラフト**: 白ダイスを振ってドラフト（1つ取って隣に回す）し、アクションを決定します。
3. **アクション**: 獲得したダイスや自分の色のダイスをアクションスペースに配置します。
    - **ビール醸造**: 客をもてなしてビールを得ます。
    - **給仕**: ウェイターでダイスを増やします。
    - **金庫/修道院**: お金を得たり、修道院トラックを進めたりします。
4. **購入/雇用**:
    - お金で「酒場の設備（アップグレード）」や「新しい従業員カード」を買います。
    - ビールで「新しい客カード（勝利点）」をスカウトします。
    - アップグレードすると、ボードのパーツが裏返って強くなります！

## 🏆 勝利条件
8ラウンド終了後、デッキ内の全てのカードの勝利点を合計し、最も高いプレイヤーの勝利です。

## 🛠 初心者向けヒント
- **テーブルの数**: 客が増えても座れなければ意味がありません。序盤はテーブルの増築や、常連客（テーブルに座らない客）の確保が重要です。
- **貴族デッキ**: ビールを大量に払って貴族（高得点カード）を集めるのが勝利への近道です。"""
    },
    {
        "slug": "clans-of-caledonia",
        "title_en": "Clans of Caledonia",
        "title_ja": "クランズ・オブ・カレドニア",
        "min_players": 1,
        "max_players": 4,
        "play_time": 120,
        "min_age": 12,
        "published_year": 2017,
        "bgg_url": "https://boardgamegeek.com/boardgame/216132/clans-caledonia",
        "rules_summary": """# 🥃 クランズ・オブ・カレドニア (Clans of Caledonia)

## 💎 ゲームの目的
19世紀スコットランド。氏族（クラン）の長となり、ウイスキー、乳製品、パンなどの生産拠点を広げ、輸出契約を結んで富と名声を得ます。市場の価格変動を利用した交易が熱い経済戦略ゲームです。

## 📦 コンポーネント
- マップボード
- 市場ボード
- プレイヤーボード
- 輸出契約タイル
- 各種コマ（牛、羊、チーズ、麦、パン、ウイスキーなど）

## 🔄 ゲームの流れ
全5ラウンドを行います。
1. **アクション**: プレイヤーはパスするまで順にアクションを行います。
    - **建設**: お金と資源を払い、マップ上にユニット（牛、加工場、畑など）を置きます。
    - **交易**: 市場で商品を売買します。売れば価格が下がり、買えば上がります。
    - **契約獲得**: 輸出契約タイルを取ります。
    - **契約達成**: 必要な商品（肉やチーズなど）を納品し、輸入ボーナス点（綿花、タバコ、サトウキビ）を得ます。
    - **船の移動**: 川を渡って遠くへ建設できるようになります。
2. **生産**: マップ上の自分のユニットから資源やお生み出されます。
3. **得点計算**: ラウンドごとのボーナス点が入ります。

## 🏆 勝利条件
5ラウンド終了後、輸出契約、集めた希少品（綿花など）、所持金、達成した集落数などを計算し、最も点が高いプレイヤーの勝利です。

## 🛠 初心者向けヒント
- **氏族の能力**: 各クランには強力な固有能力があります。自分のクランの長所を最大限活かす戦略を立てましょう。
- **隣接ボーナス**: 他人のユニットと隣接して建てると、市場より安く商品が買えるボーナスがあります。孤立せず、賑わっている場所へ行きましょう。"""
    },
    {
        "slug": "web-of-power",
        "title_en": "Web of Power",
        "title_ja": "王と枢機卿",
        "min_players": 3,
        "max_players": 5,
        "play_time": 45,
        "min_age": 12,
        "published_year": 2000,
        "bgg_url": "https://boardgamegeek.com/boardgame/1723/web-power",
        "rules_summary": """# 👑 王と枢機卿 (Web of Power / Han)

## 💎 ゲームの目的
中世ヨーロッパの権力者となり、修道院を建て、枢機卿を送り込んで、各国の影響力を支配します。エリアマジョリティ（陣取り）とネットワーク構築が融合した名作です。

## 📦 コンポーネント
- ゲームボード（ヨーロッパ地図）
- 建物コマ（修道院）
- 枢機卿コマ
- カード（国カード）

## 🔄 ゲームの流れ
1. **カードのプレイ**: 手札から同色の国カードを1〜3枚出します。
2. **修道院の建設**: 出した枚数と同じ数まで、その国の都市に修道院を建設できます。
3. **枢機卿の配置**: 修道院を置く代わりに、その国の「同盟テーブル」に枢機卿を送り込むこともできます。
    - ※ただし、その国に置ける枢機卿の上限は、その国にある「修道院の総数」までです。他人の修道院も数に含みますが、マジョリティ争いが激化します。
4. **道路の敷設**: 自分の修道院が2つ置かれたら、その間を道路で繋げます。道路も点数になります。

## 🏆 勝利条件
全てのコマを置ききるか、山札が尽きたら終了。
各国ごとの修道院の数（順位による点数）、枢機卿の同盟ボーナス、道路の連続数を合計し、最も高いプレイヤーの勝利です。

## 🛠 初心者向けヒント
- **便乗**: 枢機卿を置くための「枠」は、他人が修道院を建てて広げてくれることもあります。他人の動向をよく見て、少ない労力で1位をかすめ取りましょう。
- **3枚出し**: 一気に3つ置くのは強力ですが、手札補充は毎ターン上限（通常2枚）まで行われるため、次の手番が弱くなることも考慮しましょう。"""
    },
    {
        "slug": "fab-fib",
        "title_en": "Fab Fib",
        "title_ja": "ファブフィブ",
        "min_players": 3,
        "max_players": 10,
        "play_time": 30,
        "min_age": 10,
        "published_year": 2004,
        "bgg_url": "https://boardgamegeek.com/boardgame/10927/fab-fib",
        "rules_summary": """# 🤥 ファブフィブ (Fab Fib)

## 💎 ゲームの目的
数字を使った嘘つきゲーム（ブラフゲーム）です。前の人より「大きな数字」を宣言しなければなりませんが、嘘をついても構いません。ただし、嘘がバレるとダメージを受けます。

## 📦 コンポーネント
- カード（0〜9の数字）
- ライフポイント（ダメージディスク）

## 🔄 ゲームの流れ
1. **宣言**: 手番プレイヤーは3枚のカードを受け取り、自分だけ見て、好きな3桁の数字を作って宣言し、伏せて次の人に渡します。
    - **ルール**: 数字は「大きい順」に並べて読みます（例：2、9、5なら「952」）。
    - **制約**: 前の人が宣言した数字より「大きい数字」を宣言しなければなりません。
    - **嘘**: もちろん、実際のカードと違う数字を言ってもOKです（これがファブフィブ！）。
2. **判断**: 次のプレイヤーは、渡されたカードを受け取る前に「信じる」か「疑う（ダウト）」かを選びます。
    - **信じる場合**: カードを受け取り（見ずに交換してもOK）、自分も中を見て、さらに大きな数字を宣言して次の人へ。
    - **疑う場合**: カードをオープンします。
        - 嘘だった（宣言通りの数字が作れない）場合 → 前の人がダメージを受ける。
        - 本当だった（宣言以上の数字が作れる）場合 → 疑った自分がダメージを受ける。

## 🏆 勝利条件
ダメージを受けてライフがなくなった人から脱落します。最後まで生き残ったプレイヤーの勝利です。

## 🛠 初心者向けヒント
- **些細な嘘**: 「998」のようなギリギリの数字でなくても、少しだけ数字を盛る小さな嘘がバレにくいです。
- **カード交換**: カードを受け取った後、任意の枚数を山札と交換して手札を強くし、嘘を本当にすることもできます。"""
    },
    {
        "slug": "brass-lancashire",
        "title_en": "Brass: Lancashire",
        "title_ja": "ブラス：ランカシャー",
        "min_players": 2,
        "max_players": 4,
        "play_time": 120,
        "min_age": 14,
        "published_year": 2018,
        "bgg_url": "https://boardgamegeek.com/boardgame/223555/brass-lancashire",
        "rules_summary": """# 🏭 ブラス：ランカシャー (Brass: Lancashire)

## 💎 ゲームの目的
産業革命のマンチェスター周辺で、綿花産業を中心に富を築きます。『バーミンガム』の前身ですが、こちらは「港」を使った海外輸出と、より厳しい資金繰りが特徴の、硬派な経済ゲームです。

## 📦 コンポーネント
- ゲームボード
- プレイヤーボード
- 産業タイル（紡績所、港、炭鉱、製鉄所、造船所）
- カード、資源キューブ

## 🔄 ゲームの流れ
基本システムは『バーミンガム』と同じく、カードを捨てて建設・敷設・売却などを行います。
**バーミンガムとの違い**:
- **海外市場**: 港タイルを持っていなくても、「遠洋市場」タイルと繋がっていれば綿花を売れますが、市場が飽和すると売れなくなります（リスクあり）。
- **港タイル**: 綿花を売るための主要な販売先として、自分で建設する必要があります。
- **造船所**: 非常に高得点ですが、建設が難しく、建てられる数も限られています。

## 🏆 勝利条件
運河の時代と鉄道の時代の合計勝利点が最も高いプレイヤーの勝利です。

## 🛠 初心者向けヒント
- **借金必須**: バーミンガム以上にカツカツです。最初の数ターンは借金をして、レベルの高い施設を建てる準備をしましょう。
- **開発**: レベル1の紡績所は運河の時代が終わると消えてしまいます。早めに「開発」アクションでレベル1を飛ばし、レベル2以上（消えない）を建てましょう。"""
    },
    {
        "slug": "azul-summer-pavilion",
        "title_en": "Azul: Summer Pavilion",
        "title_ja": "アズール：サマーパビリオン",
        "min_players": 2,
        "max_players": 4,
        "play_time": 45,
        "min_age": 8,
        "published_year": 2019,
        "bgg_url": "https://boardgamegeek.com/boardgame/287954/azul-summer-pavilion",
        "rules_summary": """# 🏖️ アズール：サマーパビリオン (Azul: Summer Pavilion)

## 💎 ゲームの目的
アズールシリーズ第3弾。今度は夏の離宮の床を、ひし形のタイルで飾り付けます。色が重要ですが、ラウンドごとに「ワイルドカラー（万能色）」が変わるため、より計画的な獲得が求められます。

## 📦 コンポーネント
- ひし形タイル（6色）
- プレイヤーボード（星型の配置スペース）
- 得点ボード、工場展示ボード

## 🔄 ゲームの流れ
全6ラウンドを行います。
1. **タイル獲得**: 通常のアズールと同様、工房か中央から同色のタイルを全て取ります。
    - **ワイルド**: そのラウンドの「ワイルドカラー」が含まれていても、**ワイルドだけは取れません**（他の色を取った時に1個だけオマケで付いてくることはあります）。
2. **タイル配置**:
    - ボード上の星型のマス（1〜6の数字が書かれています）を埋めます。
    - **コスト**: 「5」のマスに赤を置くには、赤のタイルを含めて**合計5枚**のタイルを捨てる必要があります（1枚置いて4枚捨てる）。
    - ここで「ワイルドカラー」をコストの一部として使えます。
3. **ボーナス**: 柱や彫像などの周りを囲むと、サプライから追加のタイルをもらえます。

## 🏆 勝利条件
6ラウンド終了後、配置点、完成した星（色/数字）のボーナス点を合計し、最も高いプレイヤーの勝利です。

## 🛠 初心者向けヒント
- **タイルの温存**: 前作と違い、獲得フェイズで余ったタイルは次のラウンドに持ち越せます（4枚まで）。無理に置かず、次のラウンドのワイルドに合わせて貯めるのも戦略です。
- **「1」は後回し**: コスト1のマスはいつでも埋められます。コストの高い「5」や「6」を、ワイルドが多いラウンドに狙いましょう。"""
    },
    {
        "slug": "for-sale",
        "title_en": "For Sale",
        "title_ja": "フォーセール",
        "min_players": 3,
        "max_players": 6,
        "play_time": 30,
        "min_age": 8,
        "published_year": 1997,
        "bgg_url": "https://boardgamegeek.com/boardgame/172/sale",
        "rules_summary": """# 🏠 フォーセール (For Sale)

## 💎 ゲームの目的
不動産王となり、安く家を仕入れ、高く売りさばいて大儲けすることを目指します。「買う」パートと「売る」パートの2部構成で進む、短時間で終わる競りゲームの決定版です。

## 📦 コンポーネント
- 家カード（1〜30の価値）
- 小切手カード（0〜15,000ドル）
- コイン

## 🔄 ゲームの流れ
1. **買い付けフェイズ（競り）**:
    - 場の家カードを競ります。プレイヤーは順に「入札（コインを出す）」か「パス（降りる）」をします。
    - **降りる時**: 降りた人から順に、場にある一番価値の低い家を獲得します。
        - 自分の出したコインの**半額**が戻ってきます（良心的！）。
    - **最後まで残った人**: 一番高い家を獲得しますが、出したコインは**全額支払い**ます。
2. **売却フェイズ**:
    - 全員が家を手に入れたら第2ラウンド。場に小切手カードが並びます。
    - 全員手札から家カードを1枚選び、せーので公開します。
    - **価値の高い家**を出した人から順に、**高額な小切手**を獲得します。

## 🏆 勝利条件
残ったコインと、獲得した小切手の合計金額が最も高いプレイヤーの勝利です。

## 🛠 初心者向けヒント
- **降りる勇気**: 高い家を無理して買うより、早めに降りてコインを温存し、そこそこの家を貰うのが賢い場合も多いです（半額戻るルールを活用しましょう）。
- **トップ取り**: 売却フェイズでは、一番高い小切手（15,000ドル）を取ることが重要です。ここぞという時に最強の「30」の家を使いましょう。"""
    },
    {
        "slug": "castles-of-mad-king-ludwig",
        "title_en": "Castles of Mad King Ludwig",
        "title_ja": "ノイシュヴァンシュタイン城",
        "min_players": 1,
        "max_players": 4,
        "play_time": 90,
        "min_age": 13,
        "published_year": 2014,
        "bgg_url": "https://boardgamegeek.com/boardgame/155426/castles-mad-king-ludwig",
        "rules_summary": """# 🏰 ノイシュヴァンシュタイン城 (Castles of Mad King Ludwig)

## 💎 ゲームの目的
狂王ルートヴィヒ2世の理不尽な要望に応える建築家となり、お城を増築していきます。部屋を繋げてボーナスを得て、最高に奇抜で豪華なお城を作り上げましょう。

## 📦 コンポーネント
- 部屋タイル（様々な形と大きさ）
- 王の要望カード
- マスタービルダー・トークン
- お金

## 🔄 ゲームの流れ
1. **価格設定**: 親（マスタービルダー）は、場に出た新しい部屋タイルに値段（2000〜15000マルク）を付けます。
    - 自分が欲しいものを安く、他人が欲しいものを高く設定する心理戦です。
2. **購入と配置**:
    - 親の左隣のプレイヤーから順に、親にお金を支払ってタイルを買います。
    - 親は最後に残ったものを買います（この時のお金は銀行へ）。
    - 買ったタイルを自分のお城の入り口や他の部屋と繋げて配置します。
3. **完成ボーナス**: 部屋の出入り口が全て繋がると「完成」となり、部屋の種類に応じた強力なボーナス（再手番、勝利点、お金など）がもらえます。

## 🏆 勝利条件
山札が尽きたら終了。
部屋自体の点数、王の要望（目標）ボーナス、地下室などの点数を合計し、最も高いプレイヤーの勝利です。

## 🛠 初心者向けヒント
- **価格設定の妙**: 高くしすぎると誰も買わず、自分も買えなくなります。安くしすぎると他人に即買いされます。「相手がギリギリ出しにくい価格」を見極めるのがコツです。
- **完成ボーナス重視**: 部屋を完成させると連鎖的に有利になります。特に「リビング（再手番）」の完成は強力です。"""
    },
    {
        "slug": "paris",
        "title_en": "Paris",
        "title_ja": "パリ",
        "min_players": 2,
        "max_players": 4,
        "play_time": 90,
        "min_age": 12,
        "published_year": 2020,
        "bgg_url": "https://boardgamegeek.com/boardgame/282954/paris",
        "rules_summary": """# 🇫🇷 パリ (Paris)

## 💎 ゲームの目的
1900年のパリ。投資家となり、美しい建物を建設して街を不動産開発します。凱旋門キーを集め、パリの各地区での影響力を高めましょう。

## 📦 コンポーネント
- ゲームボード（凱旋門を中心に放射状に広がる地区）
- 建物タイル
- 凱旋門キー
- フラン（お金）

## 🔄 ゲームの流れ
1. **建物タイルの配置**: 手札からタイルを裏向きで好きな地区に置きます（将来の建設候補地になります）。
2. **鍵の獲得**: 地区に鍵コマを置き、その銀行にお金を置いて影響力を確保します。
3. **建設**: 場のタイルを表にして建設コストを払い、自分の鍵がある地区に建物を建てます。
4. **ボーナスアクション**: トラックを進んで、様々なボーナス（資源や特殊効果）を獲得します。

## 🏆 勝利条件
建物タイルが全て置かれたら終了トリガー。
各地区での影響力マジョリティ（1位、2位…）、建てた建物の点数、隠し目標などを合計し、最も高いプレイヤーの勝利です。

## 🛠 初心者向けヒント
- **8番目の建物**: 各地区の価値の高い建物（8番など）を建てると高得点ですが、コストも高いです。
- **ボーナストラック**: 単純な建設だけでなく、ボーナストラックを進めることで得られる恒久能力が勝敗を分けます。早めに進めましょう。"""
    },
    {
        "slug": "white-castle-matcha",
        "title_en": "The White Castle / Matcha",
        "title_ja": "白鷺城／ホワイト・キャッスル ＋ 茶の湯",
        "min_players": 1,
        "max_players": 4,
        "play_time": 100,
        "min_age": 12,
        "published_year": 2024,
        "bgg_url": "https://boardgamegeek.com/boardgame/371942/white-castle", 
        "rules_summary": """# 🏯 白鷺城／ホワイト・キャッスル ＋ 茶の湯 (The White Castle + Matcha)

## 💎 ゲームの目的
姫路城（白鷺城）を舞台に、藩主の信頼を得るために一族の者を城内の要職に送り込みます。拡張「茶の湯」では、新たな「茶室」エリアが加わり、芸妓と共に茶の湯の儀式を行うことでさらなる名声を得ます。

## 📦 コンポーネント
- メインボード（姫路城）、茶室ボード（拡張）
- ダイス（3色＋緑の第4のダイス）
- 家紋コマ
- カード、資源（米、鉄、真珠、銭）

## 🔄 ゲームの流れ
全3ラウンド＋1ラウンド（拡張で追加）を行います。
1. **ダイスドラフト**: 橋の上にあるダイスを1つ選びます。
    - **高い目**: 資源がもらえます。
    - **低い目**: 資源を支払う必要があります。
2. **アクション実行**: 選んだダイスの色と目に対応した場所でアクションを行います。
    - **庭園**: 庭師を配置。
    - **城内**: 侍を配置。
    - **城壁**: 兵士を配置。
    - **茶室（拡張）**: 芸妓を派遣し、茶の湯を行い、勝利点や強力なアクション権を得ます。
3. **連鎖（コンボ）**: アクションによって別の資源を得たり、さらなるアクションが誘発されたりします。

## 🏆 勝利条件
最終ラウンド終了後、城内での地位、一族の配置状況、リソースなどを点数化し、最も高いプレイヤーの勝利です。

## 🛠 初心者向けヒント
- **コンボの道筋**: 「ここで米をもらって、次に米を使って侍を動かして…」という連鎖をイメージしましょう。
- **茶室の活用**: 拡張で追加された「茶室」は、特に中盤以降の得点効率が良いです。ダイス目に左右されにくい柔軟なアクションとして使いましょう。"""
    },
    {
        "slug": "wyrmspan",
        "title_en": "Wyrmspan",
        "title_ja": "ワイアームスパン",
        "min_players": 1,
        "max_players": 5,
        "play_time": 90,
        "min_age": 14,
        "published_year": 2024,
        "bgg_url": "https://boardgamegeek.com/boardgame/410201/wyrmspan",
        "rules_summary": """# 🐲 ワイアームスパン (Wyrmspan)

## 💎 ゲームの目的
ドラゴン学の権威となり、洞窟を掘り進め、そこに多種多様なドラゴンを呼び寄せます。『ウイングスパン』のシステムをベースに、探索要素とドラゴンの生態系を追加したスピンオフ作品です。

## 📦 コンポーネント
- プレイヤーマット（3つの洞窟エリア）
- ドラゴンカード
- 洞窟カード
- 冒険者コマ
- 資源（肉、金、水晶、ミルク）、卵、コイン

## 🔄 ゲームの流れ
プレイヤーはコインを支払ってアクションを行います。
1. **掘削**: 洞窟カードをプレイして、新しい部屋を掘り進めます。報酬が得られます。
2. **誘致**: 掘削済みの洞窟にドラゴンカードを手札からプレイします。資源が必要です。
3. **探索**: 冒険者コマを洞窟の入口から奥へと進めます。
    - 通過したドラゴンの能力が次々と発動します（エンジンビルド）。
    - 奥まで進むほど強力な効果が得られますが、コスト（卵や資源）もかかります。

## 🏆 勝利条件
4ラウンド終了後、呼び寄せたドラゴンの点数、目標カードの達成点、蓄えた卵や資源の点数を合計し、最も高いプレイヤーの勝利です。

## 🛠 初心者向けヒント
- **ギルド**: ドラゴンギルドの研究を進めると、永続的なボーナスや資源が得られます。早めに進めると有利です。
- **孵化**: 生まれたばかりのドラゴン（雛）はミルクを与えると成長し、強力な力を発揮します。"""
    },
    {
        "slug": "unlock",
        "title_en": "Unlock!",
        "title_ja": "アンロック！",
        "min_players": 1,
        "max_players": 6,
        "play_time": 60,
        "min_age": 10,
        "published_year": 2017,
        "bgg_url": "https://boardgamegeek.com/boardgame/213460/unlock-escape-adventures",
        "rules_summary": """# 🔐 アンロック！ (Unlock!)

## 💎 ゲームの目的
卓上で体験できる「脱出ゲーム」です。カードと無料の専用アプリを使い、制限時間（通常60分）以内に謎を解き、密室からの脱出やミッション達成を目指します。

## 📦 コンポーネント
- 数字が書かれたカード
- 専用アプリ（スマホやタブレットにインストール）

## 🔄 ゲームの流れ
1. **探索**: 部屋カードを見て、怪しい場所の数字を探します。
2. **カード公開**: 見つけた数字のカードを山札から取ります（アイテムやパズルが現れます）。
3. **謎解き**:
    - **組み合わせ**: 青いカード（鍵など）と赤いカード（箱など）の数字を足して、新しいカードを開きます。
    - **マシン**: 複雑な装置は、カードの指示に従ってアプリに入力して操作します。
    - **コード入力**: 4桁の暗証番号などをアプリに入力して正解なら先に進めます。
4. **ヒント**: 行き詰まったらアプリからヒントをもらえます（ペナルティで評価が下がりますが、クリア優先なら使いましょう！）。

## 🏆 勝利条件
制限時間内に最後の謎を解き明かせばクリア！
かかった時間とヒントの使用回数で「星」の評価が決まります。

## 🛠 初心者向けヒント
- **分担作業**: 全員で1枚のカードを見るのではなく、「君はこっちの謎、私はあっちの機械」と手分けするのが時間短縮のコツです。
- **隠し数字**: カードの背景に薄く小さく数字が隠されていることがあります。目を凝らして探しましょう！"""
    },
    {
        "slug": "modern-art",
        "title_en": "Modern Art",
        "title_ja": "モダンアート",
        "min_players": 3,
        "max_players": 5,
        "play_time": 45,
        "min_age": 10,
        "published_year": 1992,
        "bgg_url": "https://boardgamegeek.com/boardgame/118/modern-art",
        "rules_summary": """# 🎨 モダンアート (Modern Art)

## 💎 ゲームの目的
美術館の館長となり、絵画を競り落として転売し、巨万の富を築く競りゲームの金字塔です。画家の人気（絵の価値）は、市場に出回った枚数で変動します。流行を作り出し、価値が暴落する前に売り抜けましょう。

## 📦 コンポーネント
- ゲームボード（相場表）
- 絵画カード（5人の画家）
- 競売チップ、お金

## 🔄 ゲームの流れ
全4ラウンドを行います。
1. **競りの開催**: 手番プレイヤーは手札から絵画を1枚出し、競りを開始します。カードのアイコンによって競り方が変わります。
    - **公開競り**: 自由に値段を言い合う。
    - **入札**: 全員握って一斉に公開。
    - **指値**: 出品者が値段を決め、買う人を募る。
    - **一周**: 順に一度だけ値段を言う。
    - **ダブルオークション**: 2枚セットで競る。
2. **落札と支払い**: 最高額をつけた人が銀行（出品者が落札した場合は銀行、他人が落札した場合は出品者）にお金を払って絵画を獲得します。
3. **ラウンド終了**: 誰かが「5枚目」の同じ画家の絵を出したら、その瞬間にラウンド終了です。
4. **価値の決定**: そのラウンドで多く出回った画家トップ3の絵に価値がつきます（30、20、10）。
5. **換金**: 持っている絵画をその時点の価値で売却します（ランク外の絵はただの紙切れ＝0ドルです！）。

## 🏆 勝利条件
4ラウンド終了後、最も多くのお金を持っているプレイヤーの勝利です。

## 🛠 初心者向けヒント
- **出品者ボーナス**: 他人に買わせれば、そのお金は自分の懐に入ります。自分が買うばかりでなく、他人に高く買わせるのが儲けの秘訣です。
- **相場操作**: 自分が持っている画家の絵を積極的に場に出して、ランクイン（価値上昇）させましょう。"""
    },
    {
        "slug": "not-my-fault",
        "title_en": "Not My Fault",
        "title_ja": "ノットマイフォルト",
        "min_players": 3,
        "max_players": 10,
        "play_time": 20,
        "min_age": 10,
        "published_year": 2017,
        "bgg_url": None,
        "rules_summary": """# 😖 ノットマイフォルト (Not My Fault)

## 💎 ゲームの目的
「宿題をやらなかった」などの失敗に対して、手札のカード（言い訳）を組み合わせて苦しい言い訳を作り、責任を逃れるパーティーゲームです。「私のせいじゃない、○○が××したから！」

## 📦 コンポーネント
- 言い訳カード（「誰が」「どうした」などが書かれている）
- 責任トークン

## 🔄 ゲームの流れ
1. **お題発表**: 「遅刻した理由」などのお題に対して、プレイヤーは手札から言い訳カードを出します。
2. **言い訳作成**: カードを組み合わせて文章を作ります。
    - 例：「宇宙人が」「急に爆発して」「パンツを隠したから」
3. **責任のなすりつけ**: 苦しい言い訳に対して、他のプレイヤーは「それは無理がある」と思ったら責任トークン（マイナス点）を押し付けます。
4. **判定**: 最も説得力のない（または面白い）言い訳をした人が負けになることが多いですが、ルールはグループの空気次第！

## 🏆 勝利条件
責任を押し付けられず、うまくやり過ごした人が勝利（または、最も面白い言い訳をした人が称賛されます）。

## 🛠 初心者向けヒント
- **演技力**: 内容が支離滅裂でも、堂々と自信満々に話せば信じてもらえる……かもしれません。"""
    },
    {
        "slug": "power-grid",
        "title_en": "Power Grid",
        "title_ja": "電力会社",
        "min_players": 2,
        "max_players": 6,
        "play_time": 120,
        "min_age": 12,
        "published_year": 2004,
        "bgg_url": "https://boardgamegeek.com/boardgame/2651/power-grid",
        "rules_summary": """# 🏭 電力会社 (Power Grid)

## 💎 ゲームの目的
電力会社の経営者となり、発電所を買収し、燃料を仕入れ、都市に変電所を建てて送電網を広げます。需要と供給で変動する資源価格と、熾烈な発電所オークションが熱い経営ゲームです。

## 📦 コンポーネント
- マップボード（アメリカ/ドイツなど）
- 発電所カード
- お金（エレクトロ）
- 資源コマ（石炭、石油、ゴミ、ウラン）
- 変電所コマ

## 🔄 ゲームの流れ
1. **発電所オークション**: 競りで発電所を購入します。
    - 性能が良い発電所は人気ですが、値段が釣り上がります。
2. **資源購入**: 発電に必要な燃料を買います。
    - 誰かが買うたびに値段が上がるので、手番順（逆順）が非常に重要です。
3. **建設**: マップ上の都市にお金を払って変電所を建て、送電網を広げます。
4. **発電**: 保有する発電所で資源を燃やして発電し、送電した都市数に応じて収入を得ます。

## 🏆 勝利条件
誰かが規定数の都市に建設したらゲーム終了。
最終的に、**電力を供給できている都市の数**が最も多いプレイヤーの勝利です。
（建てただけではダメで、動かせる発電所が必要です）

## 🛠 初心者向けヒント
- **しゃがみ戦法**: 手番順は「成績が良い人」ほど不利（買い物が高くなる）になります。あえてトップを走らず、2〜3番手をキープして安く資源を買うのが定石です。
- **燃料切れ注意**: 発電所を持っていても、燃料が市場から枯渇すると発電できません。ライバルの使用燃料をチェックしましょう。"""
    },
    {
        "slug": "font-karuta",
        "title_en": "Font Karuta",
        "title_ja": "フォントかるた",
        "min_players": 3,
        "max_players": 10,
        "play_time": 20,
        "min_age": 10,
        "published_year": 2017,
        "bgg_url": None,
        "rules_summary": """# 🔠 フォントかるた (Font Karuta)

## 💎 ゲームの目的
「フォント（書体）」をテーマにしたカルタです。読み上げられたフォント名や解説を聞いて、場に並べられたカードの中から正しいフォントのデザインされた札を取ります。

## 📦 コンポーネント
- 取り札（オモテ面にフォントで文字が書かれている）
- 読み札（フォント名、解説、見本が書かれている）

## 🔄 ゲームの流れ
1. **準備**: 取り札を場に散らべて置きます。
2. **読み上げ**: 読み手は読み札の「フォント名」と「デザインの特徴」を読み上げます。
    - 例：「愛のあるユニークで豊かな書体…【創英角ポップ体】」
3. **取り合い**: プレイヤーは正しいフォントが使われている札を探して取ります。
    - 文字自体は「愛」や「夢」など同じ文字がたくさんあるので、**書体の形**で見分ける必要があります。

## 🏆 勝利条件
最も多くの札を取ったプレイヤーの勝利です。

## 🛠 初心者向けヒント
- **ハネやハライ**: 明朝体の微妙なウロコの形や、ゴシック体の角の処理など、細部を観察するのがコツです。
- **有名フォント**: 「創英角ポップ体」や「ふい字」など、特徴的なフォントから覚えましょう。"""
    },
    {
        "slug": "orapa-mine",
        "title_en": "Orapa Mine",
        "title_ja": "オラパマイン",
        "min_players": 2,
        "max_players": 5,
        "play_time": 20,
        "min_age": 8,
        "published_year": 2024,
        "bgg_url": "https://boardgamegeek.com/boardgame/424152/orapa-mine",
        "rules_summary": """# 💎 オラパマイン (Orapa Mine)

## 💎 ゲームの目的
ダイヤモンド鉱山に眠る宝石を掘り当てろ！音波探知機を使って、地中に隠された宝石の位置を特定する対戦型推理ゲームです。

## 📦 コンポーネント
- ゲームボード（探知用の穴が開いている）
- 宝石コマ（赤、青、黄など）
- パズルシート、ペン

## 🔄 ゲームの流れ
1. **出題**: 1人が「親」となり、ボードの裏側に秘密裏に宝石を配置します。
2. **探知**: 「子」は、ボードの周囲から「音波」を発射する質問をします。
    - 「Aの列から音波を撃ちます」
3. **反射**: 親は、音波が宝石に当たってどう反射したか、あるいは突き抜けたかを答えます。
    - 宝石には「反射する角度」や「色」などの特性があります。
    - 例：「赤に当たって右に曲がり、3回反射してCから出ました」など（※実際のルール詳細による）。
4. **推理**: 子は結果をシートにメモし、宝石の位置を特定します。

## 🏆 勝利条件
誰よりも早く、全ての宝石の位置と種類を正しく特定したプレイヤーの勝利です。

## 🛠 初心者向けヒント
- **光の反射**: 鏡の反射パズルのような思考が必要です。まずは「何も当たらずに抜けた」列を除外して、候補を絞り込みましょう。"""
    }
]


async def enrich_games():
    print(f"Enriching {len(enrichment_data)} games with full schema data...")
    if 'supabase' not in globals():
        print("Skipping Supabase execution due to import error.")
        return

    for game in enrichment_data:
        try:
            print(f"Updating: {game['slug']}...")
            payload = {
                "title_en": game["title_en"],
                "title_ja": game["title_ja"],
                "min_players": game["min_players"],
                "max_players": game["max_players"],
                "play_time": game["play_time"],
                "min_age": game["min_age"],
                "published_year": game["published_year"],
                "bgg_url": game["bgg_url"],
                "rules_summary": game["rules_summary"], # Assuming this column exists or maps to 'k_rules'
            }

            # Upsert based on slug, assuming slug is unique
            res = (
                supabase._client.table("games")
                .upsert(payload, on_conflict="slug")
                .execute()
            )

            # Note: depending on the library version, .upsert might behave differently.
            # But standard supabase-py usage is usually .upsert(data).execute()

            if res.data:
                print(f"Successfully enriched: {game['title_en']}")
            else:
                 # Sometimes data is empty on success depending on headers
                print(f"Enriched (no data returned): {game['title_en']}")

        except Exception as e:
            print(f"Failed to enrich {game['slug']}: {e}")

if __name__ == "__main__":
    asyncio.run(enrich_games())
