# SEO 戦略と実装ガイド

本書は、**ボドゲのミカタ**におけるSEO（検索エンジン最適化）戦略をまとめたドキュメントです。技術的な実装詳細、コンテンツ戦略、および運用のベストプラクティスを管理するための生きた文書として機能します。

## 1. 技術アーキテクチャ (コア部分)

当サイトのSEOは、**ハイブリッドレンダリング**アプローチを採用しており、快適なSPA体験 (React) を維持しつつ、完全なインデックス登録を実現しています。

### サーバーサイドレンダリング (SSR) インジェクション
検索エンジンのクローラー（特にGoogle以外）がクライアントサイドレンダリング (CSR) の読み込みに失敗するリスクを回避するため、SEO関連の処理はバックエンドで明示的に行います。

- **仕組み**: FastAPIが `/games/{slug}` へのリクエストをインターセプトします。
- **プロセス**:
    1. Supabaseからゲームデータを取得する。
    2. `index.html` テンプレートを読み込む。
    3. 特有のメタデータ（タイトル、概要、OGP、JSON-LD）をHTMLの `<head>` 内に直接**注入**する。
    4. プリレンダリングされたHTMLをレスポンスとして返す。
- **主要ファイル**: `app/services/seo_renderer.py`

### カノニカルURL (正規化)
**重複コンテンツの問題を防ぐために不可欠です。**
- **実装**: すべてのゲームページで、自分自身を参照するカノニカルタグを定義しています。
- **形式**: `<link rel="canonical" href="https://bodoge-no-mikata.vercel.app/games/{slug}" />`
- **効果**: Googleに対し、トップページではなく「この特定のURL」がコンテンツの正規のソースであることを明示します。

---

## 2. キーワード調査と戦略 (データ駆動)

日本のボードゲーム市場における検索意図の分析に基づき、**「遊び方を知りたい」** と **「他人に教えたい」** という2つの異なるユーザーニーズをターゲットにします。

### 高価値キーワード
| キーワード | 意図 (Intent) | ボリューム | 優先度 |
| :--- | :--- | :--- | :--- |
| **ルール** | マニュアルやメカニクスそのものを探している一般的な検索。 | 高 | ★★★★★ |
| **インスト** | 「インストラクション」の略。**教え方**や**短い解説**を求めているユーザー。 | 高 | ★★★★★ |
| **遊び方** | ルールに対する初心者向けの用語。 | 中/高 | ★★★★☆ |
| **要約 / あらすじ** | 長い説明書を読むのを飛ばしたいユーザー。 | 中 | ★★★★☆ |
| **説明書** | ゲームに付属する公式PDFや、紛失したマニュアルを探している層。 | 中 | ★★★☆☆ |

### 最適化ターゲット
- **主要ゴール**: ゲームを持っているが、説明書を全部読みたくないユーザー（「時間がない」「インスト準備中」の層）を獲得する。
- **副次的ゴール**: 購入前にゲームの複雑さを確認したいユーザー。

---

## 3. ページ内最適化 (On-Page SEO)

### メタデータ戦略
| タグ | パターン | 目的 |
| :--- | :--- | :--- |
| **Title** | `「{Game}」のルール・インストをAI要約 | 遊び方・3行解説` | 「ルール」「インスト」「遊び方」「要約」を1行で狙い撃ちし、CTRを高める。 |
| **Description** | `「{Game}」のルールをAIが瞬時に要約。インスト準備や遊び方の確認に。「{Game}」のセットアップ、勝利条件、流れを3行で解説。` | 「インスト」と「遊び方」を前方に配置し、検索結果での関連性を強調。 |
| **OG:Image** | ゲームのカバーアート（なければデフォルト画像）。 | SNSシェア（Twitter/X）でのエンゲージメントを高める。 |

### 構造化データ (JSON-LD)
Googleがコンテンツのコンテキストを理解しやすくするため、**Schema.org** の語彙を実装しています。
- **タイプ**: `Game`
- **プロパティ**:
    - `numberOfPlayers` (プレイ人数 / QuantitativeValue)
    - `audience` (対象年齢 / minAge)
    - `timeRequired` (プレイ時間 / ISO 8601 Duration)
    - `description` (AI要約 - **重要**: ページ上のコンテンツと一致させる)

---

## 4. クロールとインデックス登録

### XMLサイトマップ
- **場所**: `/sitemap.xml` (動的に生成されます)。
- **ハンドラ**: `app/services/sitemap.py`
- **内容**:
    - 静的ページ (`/`, `/data`)
    - すべての動的ゲームページ (`/games/{slug}`)
    - `<lastmod>` はDBのタイムスタンプに基づいて自動更新されます。

### Robots.txt
- **設定**: すべてのクローラーを許可 (`User-agent: *`, `Allow: /`)。
- **AIクローラー対応**: GPTBot、ChatGPT-User、OAI-SearchBot（OpenAI）、anthropic-ai、Claude-Web（Anthropic）、PerplexityBot、Bytespider（TikTok）を明示的に許可。
- **サイトマップ連携**: robots.txt内でサイトマップの絶対URLを明示的に指定しています。

---

## 5. 運用戦略 (Google Search Console)

### 1. 日次/週次モニタリング
- **「カバレッジ (Coverage)」** レポートでエラー (5xx, 4xx) を確認する。
- **「サイトマップ」** ステータスを確認し、取得が成功しているかチェックする。

### 2. 手動インデックス登録 (スピード戦略)
新しいゲームを追加した場合や、重要なSEO修正を行った場合：
1. **URL検査 (URL Inspection)** ツールに移動する。
2. 特定のゲームURL (例: `/games/catan`) を入力する。
3. **「インデックス登録をリクエスト」** をクリックする。
*理由*: サイトマップは受動的ですが、手動リクエストは能動的で優先順位が高いためです。

### 3. パフォーマンス追跡
- 「ルール」「要約」「インスト」といったキーワードの **CTR (クリック率)** を監視する。
- 表示回数は多いがCTRが低い場合は、**タイトル**と**メタディスクリプション**のパターンを改善する。

---

## 6. 今後の最適化 (バックログ)

- [ ] **パンくずリストの構造化データ**: `BreadcrumbList` スキーマを追加し、検索結果での階層表示を改善する。
- [ ] **FAQスキーマ**: ルールセクション（例: 「準備の仕方は？」「勝利条件は？」）に対して `FAQPage` スキーマを使用する。
- [ ] **パフォーマンス (Core Web Vitals)**: 画像の読み込み（Next.js Image相当の最適化や `srcset` の改善）を行い、LCP (Largest Contentful Paint) を向上させる。
